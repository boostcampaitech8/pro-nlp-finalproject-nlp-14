components:
  schemas:
    # 인증 제공자 타입
    AuthProvider:
      type: string
      enum:
        - naver
        - google
        - guest
      default: naver
      description: 인증 제공자 (네이버/구글 OAuth, 게스트)

    # 네이버 OAuth 로그인 URL 응답
    NaverLoginUrlResponse:
      type: object
      required:
        - url
      properties:
        url:
          type: string
          format: uri
          description: 네이버 OAuth 인증 URL

    # Google OAuth 로그인 URL 응답
    GoogleLoginUrlResponse:
      type: object
      required:
        - url
      properties:
        url:
          type: string
          format: uri
          description: Google OAuth 인증 URL

    # 사용자 기본 정보
    User:
      type: object
      required:
        - id
        - email
        - name
        - authProvider
        - createdAt
        - updatedAt
      properties:
        id:
          $ref: './common.yaml#/components/schemas/UUID'
        email:
          type: string
          format: email
          example: "user@example.com"
        name:
          type: string
          minLength: 2
          maxLength: 50
          example: "John Doe"
        authProvider:
          $ref: '#/components/schemas/AuthProvider'
        createdAt:
          $ref: './common.yaml#/components/schemas/Timestamp'
        updatedAt:
          $ref: './common.yaml#/components/schemas/Timestamp'

    # 토큰 응답
    TokenResponse:
      type: object
      required:
        - accessToken
        - refreshToken
        - tokenType
        - expiresIn
      properties:
        accessToken:
          type: string
          description: JWT access token
        refreshToken:
          type: string
          description: JWT refresh token
        tokenType:
          type: string
          enum: [Bearer]
          default: Bearer
        expiresIn:
          type: integer
          description: Access token 만료 시간 (초)
          example: 1800

    # 인증 응답 (토큰 + 사용자 정보)
    AuthResponse:
      type: object
      required:
        - user
        - tokens
      properties:
        user:
          $ref: '#/components/schemas/User'
        tokens:
          $ref: '#/components/schemas/TokenResponse'

    # 토큰 갱신 요청
    RefreshTokenRequest:
      type: object
      required:
        - refreshToken
      properties:
        refreshToken:
          type: string
          description: JWT refresh token

  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT access token
