# 민감 설정 (values 파일에서 주입)
# 프로덕션에서는 Sealed Secrets 또는 External Secrets 사용 권장
apiVersion: v1
kind: Secret
metadata:
  name: mit-secrets
  namespace: {{ .Values.global.namespace }}
type: Opaque
stringData:
  # Database
  POSTGRES_USER: {{ .Values.database.user | quote }}
  POSTGRES_PASSWORD: {{ .Values.database.password | quote }}
  POSTGRES_DB: {{ .Values.database.name | quote }}
  DATABASE_URL: {{ include "mit.databaseUrl" . | quote }}

  # MinIO
  MINIO_ROOT_USER: {{ .Values.minio.rootUser | quote }}
  MINIO_ROOT_PASSWORD: {{ .Values.minio.rootPassword | quote }}
  MINIO_ACCESS_KEY: {{ .Values.minio.rootUser | quote }}
  MINIO_SECRET_KEY: {{ .Values.minio.rootPassword | quote }}

  # JWT
  JWT_SECRET_KEY: {{ .Values.jwt.secretKey | quote }}

  # LiveKit (Helm 차트에서 existingSecret으로 참조)
  keys.yaml: |
    {{ .Values.livekit.apiKey }}: {{ .Values.livekit.apiSecret }}
  LIVEKIT_API_KEY: {{ .Values.livekit.apiKey | quote }}
  LIVEKIT_API_SECRET: {{ .Values.livekit.apiSecret | quote }}

  # Clova STT
  CLOVA_STT_SECRET: {{ .Values.worker.clovaSttSecret | quote }}

  # Backend API
  BACKEND_API_KEY: {{ .Values.worker.backendApiKey | quote }}

  # NCP Clova Studio
  NCP_CLOVASTUDIO_API_KEY: {{ .Values.ncp.clovaStudioApiKey | quote }}

  # OAuth - Google
  GOOGLE_CLIENT_ID: {{ .Values.oauth.google.clientId | quote }}
  GOOGLE_CLIENT_SECRET: {{ .Values.oauth.google.clientSecret | quote }}
  GOOGLE_REDIRECT_URI: {{ .Values.oauth.google.redirectUri | quote }}

  # OAuth - Naver
  NAVER_CLIENT_ID: {{ .Values.oauth.naver.clientId | quote }}
  NAVER_CLIENT_SECRET: {{ .Values.oauth.naver.clientSecret | quote }}
  NAVER_REDIRECT_URI: {{ .Values.oauth.naver.redirectUri | quote }}
