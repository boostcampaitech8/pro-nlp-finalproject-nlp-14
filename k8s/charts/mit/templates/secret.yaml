# 민감 설정 (values 파일에서 주입)
# 프로덕션에서는 Sealed Secrets 또는 External Secrets 사용 권장
# 참고: PostgreSQL, Neo4j는 외부 서버 사용 (DATABASE_URL, NEO4J_URI 환경변수로 주입)
apiVersion: v1
kind: Secret
metadata:
  name: mit-secrets
  namespace: {{ .Values.global.namespace }}
type: Opaque
stringData:
  # Database (외부 서버)
  DATABASE_URL: {{ .Values.database.url | quote }}

  # JWT
  JWT_SECRET_KEY: {{ .Values.jwt.secretKey | quote }}

  # LiveKit (Helm 차트에서 existingSecret으로 참조)
  keys.yaml: |
    {{ .Values.livekit.apiKey }}: {{ .Values.livekit.apiSecret }}
  LIVEKIT_API_KEY: {{ .Values.livekit.apiKey | quote }}
  LIVEKIT_API_SECRET: {{ .Values.livekit.apiSecret | quote }}

  # Neo4j (외부 서버)
  NEO4J_USER: {{ .Values.neo4j.user | quote }}
  NEO4J_PASSWORD: {{ .Values.neo4j.password | quote }}

  # Clova STT
  CLOVA_STT_SECRET: {{ .Values.worker.clovaSttSecret | quote }}

  # Backend API
  BACKEND_API_KEY: {{ .Values.worker.backendApiKey | quote }}

  # TTS Server
  TTS_SERVER_URL: {{ .Values.worker.ttsServerUrl | quote }}

  # NCP Clova Studio
  NCP_CLOVASTUDIO_API_KEY: {{ .Values.ncp.clovaStudioApiKey | quote }}

  # OAuth - Google
  GOOGLE_CLIENT_ID: {{ .Values.oauth.google.clientId | quote }}
  GOOGLE_CLIENT_SECRET: {{ .Values.oauth.google.clientSecret | quote }}
  GOOGLE_REDIRECT_URI: {{ .Values.oauth.google.redirectUri | quote }}

  # OAuth - Naver
  NAVER_CLIENT_ID: {{ .Values.oauth.naver.clientId | quote }}
  NAVER_CLIENT_SECRET: {{ .Values.oauth.naver.clientSecret | quote }}
  NAVER_REDIRECT_URI: {{ .Values.oauth.naver.redirectUri | quote }}

  {{- if .Values.cloudflare.enabled }}
  # Cloudflare Tunnel
  CLOUDFLARE_TUNNEL_TOKEN: {{ .Values.cloudflare.tunnelToken | quote }}
  {{- end }}
