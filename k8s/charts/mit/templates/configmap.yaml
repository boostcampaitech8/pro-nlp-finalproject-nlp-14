# 비민감 설정 (values 파일에서 주입)
apiVersion: v1
kind: ConfigMap
metadata:
  name: mit-config
  namespace: {{ .Values.global.namespace }}
data:
  # App 설정
  APP_ENV: {{ .Values.global.environment | quote }}
  DEBUG: {{ .Values.app.debug | quote }}
  LOG_LEVEL: {{ .Values.app.logLevel | quote }}

  # Redis
  REDIS_URL: "{{ include "mit.redisUrl" . }}/0"
  ARQ_REDIS_URL: "{{ include "mit.redisUrl" . }}/1"

  # JWT (시크릿 제외)
  ACCESS_TOKEN_EXPIRE_MINUTES: {{ .Values.jwt.accessTokenExpireMinutes | quote }}
  REFRESH_TOKEN_EXPIRE_DAYS: {{ .Values.jwt.refreshTokenExpireDays | quote }}

  # CORS
  CORS_ORIGINS: {{ include "mit.corsOrigins" . | quote }}

  # MinIO
  MINIO_ENDPOINT: {{ include "mit.minioEndpoint" . | quote }}
  STORAGE_EXTERNAL_URL: {{ .Values.minio.externalUrl | quote }}

  # LiveKit
  LIVEKIT_WS_URL: {{ include "mit.livekitWsUrl" . | quote }}
  LIVEKIT_EXTERNAL_URL: {{ .Values.livekit.externalUrl | quote }}

  # Worker
  CLOVA_STT_ENDPOINT: {{ .Values.worker.clovaSttEndpoint | quote }}
  BACKEND_API_URL: {{ include "mit.backendUrl" . | quote }}
